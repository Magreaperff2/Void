-- Ensure the LPH-related functions are properly defined if not already
if not LPHOBFUSCATED then
    getfenv().LPH_NO_VIRTUALIZE = function(func) return func end
    getfenv().LPH_JIT_MAX = function(func) return func end
end

LPH_JIT_MAX(function()
    local Hooks, Targets, Whitelisted = {}, {}, {
        {655, 775, 724, 633, 891},
        {760, 760, 771, 665, 898},
        {660, 759, 751, 863, 771},
    }

    -- Function to compare the equality of two tables
    local function AreTablesEqual(a, b)
        if #a ~= #b then return false end
        for i, v in ipairs(a) do
            if b[i] ~= v then return false end
        end
        return true
    end

    LPH_NO_VIRTUALIZE(function()
        -- Scan garbage collected objects for target functions and metatables
        for _, obj in ipairs(getgc(true)) do
            if type(obj) == "function" then
                local scriptSource, lineNumber = debug.info(obj, "sl")
                if scriptSource:find("PlayerModule.LocalScript") and table.find({42, 51, 61}, lineNumber) then
                    table.insert(Targets, obj)
                end
            elseif type(obj) == "table" and rawlen(obj) == 19 and getrawmetatable(obj) then
                Targets.call = rawget(getrawmetatable(obj), "__call")
            end
        end
    end)()

    -- Validate that all necessary targets are found
    if not (Targets[1] and Targets[2] and Targets[3] and Targets.call) then
        warn("Bypass initialization failed")
        return
    end

    local scriptIdentifier = debug.info(Targets[1], "s")

    -- Hook the debug.info function to return the spoofed script path
    Hooks.debug_info = hookfunction(debug.info, LPH_NO_VIRTUALIZE(function(...)
        local args = {...}
        if not checkcaller() and AreTablesEqual(args, {2, "s"}) then
            return scriptIdentifier
        end
        return Hooks.debug_info(...)
    end))

    -- Neutralize the identified functions by hooking them to empty functions
    for i = 1, 3 do
        hookfunction(Targets[i], LPH_NO_VIRTUALIZE(function() end))
    end

    -- Hook the call metamethod to allow only whitelisted calls
    Hooks.call = hookfunction(Targets.call, LPH_NO_VIRTUALIZE(function(self, ...)
        local callArgs = {...}
        for _, whitelist in ipairs(Whitelisted) do
            if AreTablesEqual(whitelist, callArgs) then
                return Hooks.call(self, ...)
            end
        end
    end))

    task.wait(3)
end)()



if getgenv().Adventure then warn("Adventure is already executed") return end
getgenv().Adventure = true

loadstring([[
    function LPH_NO_VIRTUALIZE(f) return f end;
]])();

setfpscap(60)

local liquidbounce = loadstring(game:HttpGet("https://gist.githubusercontent.com/Forexium/af363593794cb64aa902d4f7bd1cb396/raw/d792a693e5b17aac1a9d6d78fa2e0c6b40422194/skibiditoilet.lua", true))()
local ui = liquidbounce.new()

local IS_PRACTICE = game.PlaceId == 8206123457
local AC_BYPASS = IS_PRACTICE
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

for Index, Value in workspace:GetDescendants() do
    if Value:IsA("Seat") then
        Value.Disabled = true
    end
end

local Table = {
    Magnets = {
        Enabled = false,
        Radius = 0,
        ShowHitbox = false,
    },
    AngleEnhancer = {
        Enabled = false,
        Indicator = false,
        JP = 50,
    },
    JumpPower = {
        Enabled = false,
        JP = 50,
    },
    AutoBoost = {
        Enabled = false,
        Power = 0,
    },
    AutoKick = {
        Enabled = false,
        Power = 0,
        Accuracy = 0,
        Random = false,
    }
}

local cat1 = ui:CreateCategory("Magnets", "http://www.roblox.com/asset/?id=101901814104653")
local cat2 = ui:CreateCategory("Miscellanous", "http://www.roblox.com/asset/?id=126577283745120")
local cat3 = ui:CreateCategory("Player", "http://www.roblox.com/asset/?id=101901814104653")

-- >> Magnets
local Magnets = ui:CreateModule(cat1, "Magnets", function(Value)
    Table.Magnets.Enabled = Value
end)

ui:CreateToggle(Magnets, "Hitbox", function(Value)
    Table.Magnets.ShowHitbox = Value
end)

ui:CreateSlider(Magnets, "Radius", 0, 50, 0, function(Value)
    Table.Magnets.Radius = Value
end)

-- >> Miscellanous
local autoBoost = ui:CreateModule(cat2, "AutoBoost", function(Value)
    Table.AutoBoost.Enabled = Value
end)

ui:CreateSlider(autoBoost, "Boost", 0, 15, 0, function(Value)
    Table.AutoBoost.Power = Value
end)

local autoKick = ui:CreateModule(cat2, "AutoKick", function(Value)
    Table.AutoKick.Enabled = Value
end)

ui:CreateSlider(autoKick, "Power", 0, 100, 0, function(Value)
    Table.AutoKick.Power = Value
end)

ui:CreateSlider(autoKick, "Accuracy", 0, 100, 0, function(Value)
    Table.AutoKick.Accuracy = Value
end)

ui:CreateToggle(autoKick, "Random", function(Value)
    Table.AutoKick.Random = Value
end)

-- >> Player
local angleEnhancer = ui:CreateModule(cat3, "Angle Enhancer", function(Value)
    Table.AngleEnhancer.Enabled = Value
end)

ui:CreateToggle(angleEnhancer, "Indicator", function(Value)
    Table.AngleEnhancer.Indicator = Value
end)

ui:CreateSlider(angleEnhancer, "JP", 50, 70, 50, function(Value)
    Table.AngleEnhancer.JP = Value
end)

local jumpPower = ui:CreateModule(cat3, "Jump Power", function(Value)
    Table.JumpPower.Enabled = Value
end)

ui:CreateSlider(jumpPower, "JP", 50, 70, 50, function(Value)
    Table.JumpPower.JP = Value
end)

local function AutoBoostFunction(character)
	local leftLeg = character:WaitForChild("Left Leg")
	local rightLeg = character:WaitForChild("Right Leg")
	
	local humanoid = character:WaitForChild("Humanoid")
	
	local function onTouchHitbox(hit)
		if not hit.Name:match("Arm") and not hit.Name:match("Head") then return end
		if hit:IsDescendantOf(character) then return end
		
		if humanoid.FloorMaterial ~= Enum.Material.Air then return end
		
		character.HumanoidRootPart.AssemblyLinearVelocity += Vector3.new(0, Table.AutoBoost.Power, 0)
	end
	
	leftLeg.Touched:Connect(onTouchHitbox)
	rightLeg.Touched:Connect(onTouchHitbox)
end

AutoBoostFunction(LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait())

LPH_NO_VIRTUALIZE(function()
    task.spawn(function()
        while task.wait() do
            local CatchLeft = LocalPlayer.Character:WaitForChild("CatchLeft")
            local CatchRight = LocalPlayer.Character:WaitForChild("CatchRight")
            if not CatchLeft then continue end
            if not CatchRight then continue end
            CatchLeft.Transparency = Table.Magnets.ShowHitbox and 0.5 or 1
            CatchRight.Transparency = Table.Magnets.ShowHitbox and 0.5 or 1
        end
    end)
end)()

LPH_NO_VIRTUALIZE(function()
    task.spawn(function()
        while task.wait() do
            if LocalPlayer.Character and LocalPlayer.Character:WaitForChild("CatchLeft") and LocalPlayer.Character:WaitForChild("CatchRight") then
                local CatchLeft = LocalPlayer.Character:WaitForChild("CatchLeft")
                local CatchRight = LocalPlayer.Character:WaitForChild("CatchRight")
                local Size = Vector3.new(Table.Magnets.Radius, Table.Magnets.Radius, Table.Magnets.Radius)
                    
                if CatchLeft.Size ~= Size then
                    CatchLeft.Size = Size
                end
                if CatchRight.Size ~= Size then
                    CatchRight.Size = Size
                end
            end
        end
    end)
end)()

LocalPlayer.PlayerGui.ChildAdded:Connect(function(child)
	if child.Name == "KickerGui" and Table.AutoKick.Enabled then
		local cursor = child:FindFirstChild("Cursor", true)
		
		if Table.AutoKick.Random then
			Table.AutoKick.Power = Random.new():NextNumber(75, 100)
			Table.AutoKick.Accuracy = Random.new():NextNumber(75, 100)
		end
		
		repeat task.wait() until cursor.Position.Y.Scale < 0.01 + ((100 - Table.AutoKick.Power) * 0.012)
		mouse1click()
		repeat task.wait() until cursor.Position.Y.Scale > 0.9 - ((100 - Table.AutoKick.Accuracy) * 0.001)
		mouse1click()
	end
end)

local AC_BYPASS = false

LPH_NO_VIRTUALIZE(function()
    task.spawn(function()
        local angleTick = tick()
        local oldLookVector = Vector3.new(0, 0, 0)
        
        local shiftLockEnabled = false
        local lastEnabled = false

        local function AngleCharacter(character)
            local humanoid = character:WaitForChild("Humanoid")
            local hrp = character:WaitForChild("HumanoidRootPart")

            humanoid.Jumping:Connect(function()
                if humanoid:GetState() ~= Enum.HumanoidStateType.Jumping then return end
                if tick() - angleTick > 0.2 then return end
                if not Table.AngleEnhancer.Enabled then return end

                if Table.AngleEnhancer.Indicator then
                    local h = Instance.new("Hint")
                    h.Text = "Angled"
                    h.Parent = workspace

                    game:GetService("Debris"):AddItem(h, 1)
                end
                
                if AC_BYPASS then return end

                task.wait(0.05); hrp.AssemblyLinearVelocity += Vector3.new(0, Table.AngleEnhancer.JP - 50, 0)
            end)
        end

        AngleCharacter(LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait())

        LocalPlayer.CharacterAdded:Connect(AngleCharacter)
        
        game:GetService("UserInputService"):GetPropertyChangedSignal("MouseBehavior"):Connect(function()
            if game:GetService("UserInputService").MouseBehavior == Enum.MouseBehavior.LockCenter then
                shiftLockEnabled = true
            else
                shiftLockEnabled = false
            end
        end)

        while true do
            task.wait()
            local character = LocalPlayer.Character; if not character then continue end
            local hrp = character:FindFirstChild("HumanoidRootPart"); if not hrp then continue end
            local humanoid = character:FindFirstChild("Humanoid"); if not humanoid then continue end

            local lookVector = hrp.CFrame.LookVector
            local difference = (oldLookVector - lookVector).Magnitude

            if not shiftLockEnabled and lastEnabled then
                angleTick = tick()
            end
            
            if AC_BYPASS then
                if (tick() - angleTick < 0.2) and Table.AngleEnhancer.Enabled then
                    humanoid.JumpPower = (Table.JumpPower.Enabled and Table.JumpPower.JP or 50) + (Table.AngleEnhancer.JP - 50)
                elseif not Table.AngleEnhancer.Enabled then
                    humanoid.JumpPower = (Table.JumpPower.Enabled and Table.JumpPower.JP or 50)
                end
            end

            oldLookVector = hrp.CFrame.LookVector
            lastEnabled = shiftLockEnabled
        end
    end)
end)()

local function JumpPowerFunction(character)
    local humanoid = character:WaitForChild("Humanoid")
    local humanoidRootPart = character:WaitForChild("HumanoidRootPart")

    humanoid.StateChanged:Connect(function(_, newState)
        if newState == Enum.HumanoidStateType.Jumping and Table.JumpPower.Enabled then
            task.wait(0.05)
            humanoidRootPart.AssemblyLinearVelocity += Vector3.new(0, Table.JumpPower.JP - 50, 0)
        end
    end)
end

JumpPowerFunction(LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait())
